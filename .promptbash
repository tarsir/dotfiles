# build the prompt because fuck this noise
build_prompt() { 
# find out if we're running a virtualenv
    if [ -z ${VIRTUAL_ENV+x} ]; then # VIRTUAL_ENV is unset
        if [ $(pwd) == ~ ]; then
            echo "No virtual environment set here"
        fi
        VIRTUAL_ENV_PROMPT_STR=""
    else
        VIRTUAL_ENV_PROMPT_STR=" ($(basename `echo ${VIRTUAL_ENV}`))"
        echo "Currently in ${VIRTUAL_ENV_PROMPT_STR:2:${#VIRTUAL_ENV_PROMPT_STR}-3}"
    fi
    
    # find out what docker machine is currently in use
    if [ -z ${DOCKER_MACHINE_NAME+x} ]; then
        echo "No docker machine in use"
        DOCKER_MACHINE_PROMPT_STR=""
    else
        DOCKER_MACHINE_PROMPT_STR="${DOCKER_MACHINE_NAME}"
        echo "Currently using docker machine ${DOCKER_MACHINE_PROMPT_STR}"
    fi

    if [ -d "./.git" ]; then
        GIT_LOG=$(git log -n 1 --format=oneline | cut -d" " -f 2-)
        GIT_STRING="\[$(tput setaf 7)\]$(__git_ps1) => ${GIT_LOG}"
    fi
    # now build the string
    DATETIME_STRING="\[$(tput setaf 6)\]\d \[$(tput setaf 4)\]"
    CURRENT_DIR_STRING="\[$(tput setaf 1)\]\w"
    USER_STRING="\[$(tput setaf 2)\]\u"
    WAIT_WHAT_STRING="\[$(tput sgr0)\]"
    DM_STRING="\[$(tput setaf 5)\][${DOCKER_MACHINE_PROMPT_STR}]"
    # not using this for the foreseeable future

    PS1="${DATETIME_STRING}\t ${CURRENT_DIR_STRING} ${GIT_STRING}\n    ${USER_STRING} >${WAIT_WHAT_STRING}"
}
